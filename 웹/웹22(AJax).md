# ajax

- 서버와 데이터를 교환하는 기술임. 클라이언트와 서버가 적은양의 데이터를 교환하는게 목적임 

- 웹사이트의 전체중에 일부만 바꾸는거.

  - url주소 바뀔 때 웹이 반짝 하는건 웹사이트 위에서부터 전체를 새로 출력하는 것.

  - Ajax로 처리하면 반짝 하지않고 지정된 곳의 데이터만 교환된다.

- 결과를 json형태로 받는다.

  

- 아래처럼 코드 만들기

![image-20200205103118153](images/image-20200205103118153.png)

![image-20200205103154858](images/image-20200205103154858.png)

![image-20200205103210618](images/image-20200205103210618.png)

![image-20200205104517778](images/image-20200205104517778.png)

- 로그인성공시 login/ok

![image-20200205104059089](images/image-20200205104059089.png)

![image-20200205104247752](images/image-20200205104247752.png)

- 인사등록 눌렀을 때의 뷰 연결

![image-20200205104331603](images/image-20200205104331603.png)

- 로그인 성공하면

![image-20200205104807628](images/image-20200205104807628.png)

- 왼쪽에 인사등록 누르면 아래처럼 나오면 성공

![image-20200205104832955](images/image-20200205104832955.png)



### 아이디 중복체크하기

- 우선 Ajax안쓸 때

![image-20200205131430492](images/image-20200205131430492.png)

- 동적 컨텐츠를 만들 때 이벤트 연결은 on으로 해줘야 한다.
  - 처음에는 info가 null일 것이다.

![image-20200205132504367](images/image-20200205132504367.png)

- 이렇게 하니까  사번에 t를 누르자마자 깜빡하면서 url에 t가 전송되고 사번에 내가 입력했던 t는 삭제된다. 사용가능한 아이디라는 문자는 나옴.
  - 이게 우리가 기존에 하던 방식의 문제점임.
  - 그래서 전체 페이지를 다 바꾸는게 아니라 사용 가능한 아이디인지 아닌지만 바꾸자.
    - 이렇게 하면 내가 작업하던 사번에 글자들은 지워지지 않을 것 -> 비동기통신. 

![image-20200205132556265](images/image-20200205132556265.png)

- 이제 비동기통신 시작
  - modelandview안써도 된다.
  - produce = 내 Ajax를 처리한 후 결과에 대한 format
    - 우리는 사용 가능한 아이디를 전송할꺼니까 문자열 = produces="application/text;charset=utf-8"
    - @ResponseBody String
      - 텍스트를 보낼 때

![image-20200205133829606](images/image-20200205133829606.png)

![image-20200205135042102](images/image-20200205135042102.png)

![image-20200205135121085](images/image-20200205135121085.png)

- 결과화면

![image-20200205135147660](images/image-20200205135147660.png)

- DB에 있는 사번을 치니까 아래처럼 나옴

![image-20200205135213313](images/image-20200205135213313.png)